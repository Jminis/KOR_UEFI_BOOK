# 34. 간단한 UEFI 드라이버 생성

이번 장에서는 UEFI 드라이버를 생성한다.

지금까지는 UEFI 애플리케이션만 만들었다. 애플리케이션과 드라이버의 주요 차이점은 애플리케이션이 실행된 후 메모리에 언로드된다는 점이다. 하지만 드라이버는 메모리에 남아있다. 또한 다른 애플리케이션이 사용할 유용한 프로토콜을 제공하기도 한다.

가장 간단한 드라이버로 `UefiLessonsPkg/SimpleDriver/SimpleDriver.inf`를 생성한다.

```
[Defines]
  INF_VERSION                    = 1.25
  BASE_NAME                      = SimpleDriver
  FILE_GUID                      = 384aeb18-105d-4af1-bf17-5e349e8f4d4c
  MODULE_TYPE                    = UEFI_DRIVER
  VERSION_STRING                 = 1.0
  ENTRY_POINT                    = SimpleDriverEntryPoint

[Sources]
  SimpleDriver.c

[Packages]
  MdePkg/MdePkg.dec

[LibraryClasses]
  UefiDriverEntryPoint
  UefiLib
```

기존에 애플리케이션을 생성할 때 사용했던 `application.inf` 파일과 드라이버를 생성할 때 사용하는 `driver.inf` 파일의 차이는 아래와 같다.

* `MODULE_TYPE`은 `UEFI_DRIVER`이다. \
  (이전에는 항상 `UEFI_APPLICATION`을 사용했다.
* `ENTRY_POINT`는 `SimpleDriverEntryPoint`이다. \
  (이전에는 항상 `UefiMain`을 사용했지만, 드라이버는 `Entry/Unload` 함수로 작동하므로 적절한 이름을 지정한다.)
* UefiDriverEntryPoint 라이브러리 클래스가 사용된다.\
  (이전에는 항상\
  UefiApplicationEntryPoint를 사용했다.)\
  UefiApplicationEntryPoint 라이브러리에 대해 궁금하다면 아래 링크를 통해 확인할 수 있다.\
  [https://github.com/tianocore/edk2/tree/master/MdePkg/Library/UefiDriverEntryPoint](https://github.com/tianocore/edk2/tree/master/MdePkg/Library/UefiDriverEntryPoint)
