# 25. PCD 더 알아보기

## Dynamic PCD

&#x20;이제 Dynamic PCD를 모듈에 추가해보자. DEC 파일에서의 Dynamic PCD는 \[PcdsDynamic] 섹션으로 들어간다.

```
$ vi UefiLessonsPkg/UefiLessonsPkg.dec
---
[PcdsDynamic]
  gUefiLessonsPkgTokenSpaceGuid.PcdDynamicInt32|0xCAFECAFE|UINT32|0x4F9259A3
```



&#x20;그 다음, INF 파일에 추가해준다. INF 파일에서는 \[Pcd] 섹션 아래에 넣어준다.

```
[Pcd]
  gUefiLessonsPkgTokenSpaceGuid.PcdDynamicInt32
```



\*.c 코드에서 PcdGet32 / PcdSet32S API를 사용하여 변수 작업을 수행한다.

```
$ vi UefiLessonsPkg/PCDLesson/PCDLesson.c
---
Print(L"PcdDynamicInt32=0x%x\n", PcdGet32(PcdDynamicInt32));
PcdSet32S(PcdDynamicInt32, 0xBEEFBEEF);
Print(L"PcdDynamicInt32=0x%x\n", PcdGet32(PcdDynamicInt32));
```



&#x20;이제 AutoGen 코드를 확인해보자. PCD는 AutoGen.c에 아무런 변화도 일으키지 않지만, AutoGen.h 파일은 다음과 같은 코드가 추가된다.

```c
#define _PCD_TOKEN_PcdDynamicInt32  0U
#define _PCD_GET_MODE_32_PcdDynamicInt32  LibPcdGet32(_PCD_TOKEN_PcdDynamicInt32)
#define _PCD_GET_MODE_SIZE_PcdDynamicInt32  LibPcdGetSize(_PCD_TOKEN_PcdDynamicInt32)
#define _PCD_SET_MODE_32_PcdDynamicInt32(Value)  LibPcdSet32(_PCD_TOKEN_PcdDynamicInt32, (Value))
#define _PCD_SET_MODE_32_S_PcdDynamicInt32(Value)  LibPcdSet32S(_PCD_TOKEN_PcdDynamicInt32, (Value))
```

